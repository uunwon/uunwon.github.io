---
layout: post
title:  "SQL"
categories:
  - Computer
tag:
- test 
---

## SQL by 수제비

* 절차형 SQL 
* 데이터 분석 함수
* 데이터베이스 기본 연산
* 데이터 제어어 (DCL) 명령문 
<br>

<hr>

### 절차형 SQL
<br>
`프로시저(Procedure)`  
　절차형 SQL을 활용하여 특정 기능을 수행할 수 있는 트랜잭션 언어이다. 프로시저 호출을 통해 실행되며, 이를 통해 일련의 SQL 작업을 포함하는 데이터 조작어를 수행한다.

　실행부(TRANSACTION) 는 해당 프로시저에서 수행한 DML을 DBMS에 반영할지 복구할지를 결정하는 부분이다. **COMMIT**은 하나의 트랜잭션이 성공적으로 끝나고, 데이터베이스가 일관성 있는 상태에 있을 때 하나의 트랜잭션이 끝냈을 때 사용하는 연산이다. **ROLLBACK**은 하나의 트랜잭션이 비정상적으로 종료되어 트랜잭션 원자성이 깨질 경우 처음부터 다시 시작하거나, 부분적으로 연산을 취소하는 연산이다.

<p>
EXECUTE 프로시저_명 (파라미터_1, 파라미터_2, .. );
</p>
{: .notice}

`사용자 정의함수`  
　절차형 SQL을 활용하여 일련의 SQL 처리를 수행하여, 수행 결과를 **단일 값으로 반환**할 수 있는 절차형 SQL이다. DBMS에서 제공되는 공통적 함수 이외에 사용자가 직접 정의하고 작성한다.

<p>
함수명 (파라미터1, 파라미터2, ...)
</p>
{: .notice}

`트리거(Trigger)`  
　특정 테이블에 삽입, 수정, 삭제 등의 데이터 변경 이벤트가 발생하면 DBMS에서 자동적으로 실행되도록 구현된 프로그램이다.

　**행 트리거**는 데이터 변화가 생길 때마다 실행되며, **문장 트리거**는 트리거에 의해 단 한번 실행된다.

<br>

### 데이터 분석 함수 

　데이터 분석 함수란 총합, 평균 등의 데이터 분석을 위해 **복수 행 기준의 데이터를 모아서 처리**하는 것을 목적으로 하는 다중 행 함수이다. GROUP BY 구문을 활용해 복수 행을 그룹핑한다.

#### 📌 집계 함수
　여러 행 또는 테이블 전체 행으로부터 하나의 결괏값을 반환하는 함수이다.

`GROUP BY`  
해당 구문 뒤에 테이블을 구분하는 컬럼을 기재하여 그룹화한다. 실제 구체적인 데이터 분석값을 보고자 하는 컬럼 단위를 선정할 때 사용되는 기준이 된다. (속성값을 그룹으로 분류하고자 할 때)  

`HAVING`  
해당 구문은 WHERE 구문 내에는 사용할 수 없는 집계 함수의 구문을 적용하여 복수 행의 계산 결과를 조건별로 적용하는 데 사용된다. 즉, GROUP BY 및 집계 함수에 대한 WHERE 구문이다. (그룹에 제하는 조건문을 작성할 수 있는 절)  

#### 📌 그룹 함수
　테이블의 전체 행을 하나 이상의 컬럼을 기준으로 컬럼 값에 따라 그룹화하여 그룹별로 결과를 출력하는 함수이다.

`ROLLUP`  
해당 함수에 의해 지정된 컬럼은 중간 집계 값을 산출할 수 있는 그룹 함수로, 지정 컬럼의 수보다 하나 더 큰 레벨만큼의 중간 집계 값이 생성된다.  

`CUBE`  
결합 가능한 모든 값에 대해 다차원 집계를 생성하는 그룹 함수이다. 연산이 많아 시스템에 부담을 준다.  

`GROUPING SETS`  
집계 대상 컬럼들에 대한 개별 집계를 구할 수 있으며, ROLLUP이나 CUBE와는 달리 컬럼 간 순서와 무관한 결과를 얻을 수 있는 그룹 함수이다.  

#### 📌 윈도 함수
　데이터베이스를 사용한 **온라인 분석 처리** 용도로 사용하기 위해서 표준 SQL에 추가된 함수다.

`순위 함수`  
레코드의 순위를 계산하는 함수  

`행순위 함수`  
레코드에서 가장 먼저 나오거나 가장 뒤에 나오는 값, 이전/이후의 값들을 출력하는 함수  

`그룹 내 비율 함수`  
백분율을 보여주거나 행의 순서별 백분율 등 비율과 관련된 통계를 보여주는 함수  

<br>

### 데이터베이스 기본 연산
`SELECT` 데이터의 내용을 조회할 때 사용하는 명령어
<p>
SELECT [ALL | DISTINCT | DISTINCTALL] 속성명1, 속성명2, .. <br>
FROM 테이블명1, ... <br>
[WHERE 조건] <br>
[GROUP BY 속성명1, ..] <br>
[HAVING 그룹조건] <br>
[ORDER BY 속성 [ASC | DESC]];
</p>
{: .notice}

`INSERT` 데이터의 내용을 삽입할 때 사용하는 명령어
<p>
INSERT INTO 테이블명(속성명1, ..) VALUES(데이터1, ..);
</p>
{: .notice}

`UPDATE` 데이터의 내용을 변경할 때 사용하는 명령어
<p>
UPDATE 테이블명 SET 속성명 = 데이터, .. WHERE 조건;
</p>
{: .notice}

`DELETE` 데이터의 내용을 삭제할 때 사용하는 명령어
<p>
DELETE FROM 테이블명 WHERE 조건;
</p>
{: .notice}

<br>

### 데이터 제어어 (DCL) 명령문

　DCL은 데이터베이스 관리자가 데이터 보안, 무결성 유지, 병행 제어, 회복을 위해 관리자(DBA)가 사용하는 제어용 언어다.

`GRANT 권한 ON 테이블 TO 사용자`  
관리자가 사용자에게 데이터베이스에 대한 권한을 부여하는 명령어  
(+ WITH GRANT OPTION)  

`REVOKE 권한 ON 테이블 FROM 사용자`  
관리자가 사용자에게 부여했던 권한을 회수하기 위한 명령어  
(+ CASCADE CONSTRAINTS)  

<br>

#### PLUS
**뷰 생성**: CREATE VIEW 이름 AS (조건); <br>
**인덱스 생성**: CREATE INDEX 이름 ON 조건; <br>
**UNION**: 합집합이면서 중복 제거 <br>
**UNIONALL**: 합집합이면서 중복 허용
{: .notice}